<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>404 - 页面不存在</title>

    <!-- Element Plus CSS -->
    <link rel="stylesheet" href="https://unpkg.com/element-plus/dist/index.css">
    <link rel="stylesheet" href="https://unpkg.com/element-plus/theme-chalk/index.css">

    <!-- Element Plus Icons -->
    <link rel="stylesheet" href="https://unpkg.com/@element-plus/icons-vue/dist/index.css">

    <!-- Vue 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

    <!-- Element Plus JS -->
    <script src="https://unpkg.com/element-plus"></script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #f5f7fa;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            text-align: center;
            max-width: 800px;
            padding: 20px;
        }

        .warning-icon {
            font-size: 80px;
            color: #e6a23c;
            margin-bottom: 20px;
        }

        .title {
            font-size: 72px;
            font-weight: bold;
            color: #303133;
            margin-bottom: 10px;
        }

        .sub-title {
            font-size: 20px;
            color: #606266;
            margin-bottom: 30px;
        }

        .actions {
            margin-top: 30px;
        }

        .btn {
            display: inline-block;
            padding: 12px 32px;
            font-size: 16px;
            font-weight: 500;
            color: white;
            background: #409eff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            text-decoration: none;
            transition: background 0.3s;
        }

        .btn:hover {
            background: #79bbff;
        }

        .debug-info {
            margin-top: 40px;
            padding: 20px;
            background: #f0f2f5;
            border-radius: 8px;
            text-align: left;
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
            font-size: 14px;
        }
    </style>
</head>
<body>
<div id="app" class="container">
    <!-- 如果 Vue 加载成功，显示 Vue 版本 -->
    <div v-if="vueLoaded" class="not-found">
        <div class="warning-icon">⚠️</div>
        <h1 class="title">404</h1>
        <p class="sub-title">抱歉，您访问的页面不存在</p>
        <div class="actions">
            <button class="btn" @click="goHome">返回首页</button>
            <button class="btn" @click="goBack" v-if="canGoBack" style="background: #909399; margin-left: 10px;">返回上一页</button>
        </div>
    </div>

    <!-- 如果 Vue 加载失败，显示纯 HTML 版本 -->
    <div v-else id="fallback">
        <div class="warning-icon">⚠️</div>
        <h1 class="title">404</h1>
        <p class="sub-title">抱歉，您访问的页面不存在</p>
        <div class="actions">
            <button class="btn" onclick="window.location.href='/'">返回首页</button>
            <button class="btn" onclick="window.history.back()" id="back-btn" style="background: #909399; margin-left: 10px;">返回上一页</button>
        </div>
        <div class="debug-info">
            <p><strong>访问路径:</strong> <span id="current-path"></span></p>
            <p><strong>重定向状态:</strong> <span id="redirect-status">未处理</span></p>
            <p><a href="#" onclick="clearRedirect(); return false;">清除重定向状态</a></p>
        </div>
    </div>
</div>

<script>
    // 获取当前路径
    document.getElementById('current-path').textContent = window.location.pathname;

    // 检查是否能返回
    if (window.history.length <= 1) {
        document.getElementById('back-btn').style.display = 'none';
    }

    // 清除重定向状态的函数
    function clearRedirect() {
        sessionStorage.removeItem('vue-router-redirect');
        document.getElementById('redirect-status').textContent = '已清除';
    }

    // 检查是否有重定向
    if (sessionStorage.getItem('vue-router-redirect')) {
        document.getElementById('redirect-status').textContent = '等待处理';
    }

    // Vue 3 应用
    const { createApp, ref } = Vue;
    const { ElButton } = ElementPlus;

    const app = createApp({
        setup() {
            const vueLoaded = ref(true);
            const canGoBack = ref(window.history.length > 1);

            const goHome = () => {
                window.location.href = '/';
            };

            const goBack = () => {
                window.history.back();
            };

            return {
                vueLoaded,
                canGoBack,
                goHome,
                goBack
            };
        }
    });

    // 尝试加载 Vue
    try {
        app.use(ElementPlus);
        app.mount('#app');
    } catch (error) {
        console.error('Vue 加载失败:', error);
        document.getElementById('fallback').style.display = 'block';
        if (document.querySelector('.not-found')) {
            document.querySelector('.not-found').style.display = 'none';
        }
    }
</script>
</body>
</html>